{"version":3,"file":"AckMediaDevices.directive.js","sourceRoot":"","sources":["../src/AckMediaDevices.directive.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAAkF;AAClF,yCAOoB;AAIjB;IAFH;QAGW,UAAK,GAAqB,EAAE,CAAA;QAC3B,gBAAW,GAAmC,IAAI,mBAAY,EAAE,CAAA;QAGhE,gBAAW,GAAuB,IAAI,mBAAY,EAAE,CAAA;QAC7C,YAAO,GAAuB,IAAI,mBAAY,EAAE,CAAA;QAGvD,sBAAiB,GAAmC,IAAI,mBAAY,EAAE,CAAA;QAGtE,sBAAiB,GAAmC,IAAI,mBAAY,EAAE,CAAA;QAGtE,uBAAkB,GAAmC,IAAI,mBAAY,EAAE,CAAA;IAoCnF,CAAC;IAlCC,kCAAQ,GAAR;QACE,IAAI,CAAC,WAAW,EAAE,CAAA;IACpB,CAAC;IAED,qCAAW,GAAX;QAAA,iBAQC;QAPC,OAAO,0BAAc,EAAE;aACtB,IAAI,CAAC,UAAA,OAAO,IAAE,OAAA,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,OAAO,EAAlC,CAAkC,CAAC;aACjD,KAAK,CAAC,UAAA,CAAC;YACN,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;YACpB,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,GAAC,CAAC,CAAC,CAAA;YACnC,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;QAC1B,CAAC,CAAC,CAAA;IACJ,CAAC;IAED,mCAAS,GAAT,UAAU,OAAyB;QACjC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAC,OAAO,CAAC,CAAA;QAEzC,IAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,MAAM,EAAC;YACzC,IAAI,CAAC,WAAW,GAAG,gCAAoB,CAAC,OAAO,CAAC,CAAA;YAChD,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;SAC9C;QAED,IAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,MAAM,EAAC;YAC1C,IAAI,CAAC,YAAY,GAAG,iCAAqB,CAAC,OAAO,CAAC,CAAA;YAClD,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;SAChD;QAED,IAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,MAAM,EAAC;YACzC,IAAI,CAAC,WAAW,GAAG,gCAAoB,CAAC,OAAO,CAAC,CAAA;YAChD,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;SAC9C;QAED,OAAO,IAAI,CAAA;IACb,CAAC;IAjDQ;QAAR,YAAK,EAAE;;kDAA6B;IAC3B;QAAT,aAAM,EAAE;kCAAa,mBAAY;wDAAwC;IAEjE;QAAR,YAAK,EAAE;kCAAO,KAAK;kDAAA;IACV;QAAT,aAAM,EAAE;kCAAa,mBAAY;wDAA4B;IAC7C;QAAhB,aAAM,CAAC,OAAO,CAAC;kCAAS,mBAAY;oDAA4B;IAExD;QAAR,YAAK,EAAE;;wDAA8B;IAC5B;QAAT,aAAM,EAAE;kCAAmB,mBAAY;8DAAwC;IAEvE;QAAR,YAAK,EAAE;;wDAA8B;IAC5B;QAAT,aAAM,EAAE;kCAAmB,mBAAY;8DAAwC;IAEvE;QAAR,YAAK,EAAE;;yDAA+B;IAC7B;QAAT,aAAM,EAAE;kCAAoB,mBAAY;+DAAwC;IAfnE,eAAe;QAF9B,gBAAS,CAAC;YACT,QAAQ,EAAE,mBAAmB;SAC9B,CAAC;OAAc,eAAe,CAmD9B;IAAD,sBAAC;CAAA,AAnDE,IAmDF;AAnDe,0CAAe","sourcesContent":["import { Directive, ElementRef, Input, Output, EventEmitter } from '@angular/core'\nimport {\n  audioInputsByDevices,\n  audioOutputsByDevices,\n  videoInputsByDevices,\n  //MediaDevice,\n  browser,\n  promiseDevices\n} from \"./videoHelp\"\n\n@Directive({\n  selector: 'ack-media-devices'\n}) export class AckMediaDevices {\n  @Input() array:MediaDeviceInfo[] = []\n  @Output() arrayChange:EventEmitter<MediaDeviceInfo[]> = new EventEmitter()\n\n  @Input() error:Error\n  @Output() errorChange:EventEmitter<Error> = new EventEmitter()\n  @Output('catch') catcher:EventEmitter<Error> = new EventEmitter()\n\n  @Input() videoInputs:MediaDeviceInfo[]\n  @Output() videoInputsChange:EventEmitter<MediaDeviceInfo[]> = new EventEmitter()\n\n  @Input() audioInputs:MediaDeviceInfo[]\n  @Output() audioInputsChange:EventEmitter<MediaDeviceInfo[]> = new EventEmitter()\n\n  @Input() audioOutputs:MediaDeviceInfo[]\n  @Output() audioOutputsChange:EventEmitter<MediaDeviceInfo[]> = new EventEmitter()\n\n  ngOnInit(){\n    this.loadDevices()\n  }\n\n  loadDevices():Promise<MediaDeviceInfo[]>{\n    return promiseDevices()\n    .then(devices=>this.onDevices(devices) && devices)\n    .catch(e=>{\n      this.catcher.emit(e)\n      this.errorChange.emit(this.error=e)\n      return Promise.reject(e)\n    })\n  }\n\n  onDevices(devices:MediaDeviceInfo[]):AckMediaDevices{\n    this.arrayChange.emit(this.array=devices)\n    \n    if(this.audioInputsChange.observers.length){\n      this.audioInputs = audioInputsByDevices(devices)\n      this.audioInputsChange.emit(this.audioInputs)\n    }\n    \n    if(this.audioOutputsChange.observers.length){\n      this.audioOutputs = audioOutputsByDevices(devices)\n      this.audioOutputsChange.emit(this.audioOutputs)\n    }\n\n    if(this.videoInputsChange.observers.length){\n      this.videoInputs = videoInputsByDevices(devices)\n      this.videoInputsChange.emit(this.videoInputs)\n    }\n\n    return this\n  }\n}"]}